<html>
    <head>
        <title>Hello world</title>
    </head>
    <body>
        <script src="codemirror/lib/codemirror.js"></script>
        <script src="codemirror/lib/util/formatting.js"></script>
        <link rel="stylesheet" href="codemirror/lib/codemirror.css">
        <link rel="stylesheet" href="seashell.css">
        <script src="codemirror/mode/clike/clike.js"></script>

        <span class="right">Logged in as ctdalek - <a href="">Logout</a></span>

        <h1>Seashell, the C Shell</h1>
        <div id="top">
            <span class="buttons left">
                <button type="button" id="undo">Undo</button>
                <button type="button" id="redo">Redo</button>
                <button type="button" id="save">Save</button>
                <button type="button" id="open-file">Open File...</button>
            </span>
            <span class="buttons right">
                <button type="button" id="check-syntax">Check Syntax</button>
                <!--
                <button type="button" id="indent">Indent</button>
                <button type="button" id="unindent">Unindent</button>
                -->
                <button type="button" id="autoindent">Autoindent</button>
                <button type="button" id="comment">Comment</button>
                <button type="button" id="uncomment">Uncomment</button>
            </span>

            <span class="filename">foobar.c</span>
            <div id="codeArea">
                <textarea id="seashell">
#include <stdio>
int main() {
    printf("hello world");
    return(0);
}
                </textarea>
            </div>
        </div>
        <div id="bottom">
            <div>
                <button type="button">Compile</button>
                <button type="button">Run</button>
                <button type="button">Run with input...</button>
                <button type="button">Test with RunC</button>
                <button type="button">Submit</button>

            </div>
            <textarea id="prompt">prompt.</textarea>

        </div>

        <script type="application/javascript">
            function giveAction(elid,act) {
                document.getElementById(elid).onclick=act;
            }
            var seashellEditor = document.getElementById('seashell');
            //var txt = document.createTextNode("woohoo");
            //seashellEditor.appendChild(txt);
            var editor = CodeMirror.fromTextArea(seashellEditor, {lineNumbers: true});

            function toggleCommentHandler(isC) {
                //var from = editor.getCursor(true);
                //var to = editor.getCursor(false);
                editor.commentRange(isC, editor.getCursor(true), editor.getCursor(false));
            }
            function autoIndentHandler() {
                var from = editor.getCursor(true);
                var to = editor.getCursor(false);
                editor.autoFormatRange(from, to);
            }

            giveAction("undo", function() {editor.undo();});
            giveAction("redo", function() {editor.redo();});
                    
            giveAction("comment", function() {toggleCommentHandler(true);});
            giveAction("uncomment", function() {toggleCommentHandler(false);});
            giveAction("autoindent", autoIndentHandler);
        </script>

    </body>
</html>
